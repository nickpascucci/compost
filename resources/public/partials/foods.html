<div layout="column" ng-controller="FoodListCtrl">
  <md-toolbar>
    <div class="md-toolbar-tools">
      <h3>Dashboard</h3>
      <span flex></span>
      <div class="" ng-controller="AuthCtrl" layout-padding>
        <md-button class="logout-button" ng-click="logOut()">Log Out</md-button>
      </div>
    </div>
  </md-toolbar>
  <md-content flex layout-padding>
    <div class="help-text" ng-if="getActiveFoods(foods).length == 0">
      There are no foods here! Click "New" below to add one.
    </div>
    <md-grid-list 
       md-cols-sm="1" md-cols-md="2" md-cols-lg="3" md-cols-gt-lg="4"
       md-gutter="15px" md-row-height="20em">
      <md-grid-tile md-rowspan="1" md-colspan="1"
                    ng-repeat="food in getActiveFoods(foods) | orderBy : getDaysToExpiry"
                    ng-click="itemClicked(food)">
        <md-card layout-fill layout="column" layout-align="start start"
                 ng-class="{'md-whiteframe-z3': selectedItem == food.id}">
          <div ng-class="{'status': true,
                         'expire-3': getDaysToExpiry(food) <= 1,
                         'expire-2': getDaysToExpiry(food) > 1 && getDaysToExpiry(food) < 3,
                         'expire-1': getDaysToExpiry(food) >= 3,
                         'frozen': getIsFrozen(food)}"
               layout="row" layout-padding layout-align="start start" layout-fill>
            <div style="min-width: 48px; margin-right: 15px" layout-padding>
              <md-icon md-font-set="material-icons" class="md-light md-48"
                       ng-show="getDaysToExpiry(food) <= 1">
                error_outline
              </md-icon>
              <md-icon md-font-set="material-icons" class="md-light md-48"
                       ng-show="getDaysToExpiry(food) > 1 && getDaysToExpiry(food) < 3">
                warning
              </md-icon>
              <md-icon md-font-set="material-icons" class="md-light md-48"
                       ng-show="getDaysToExpiry(food) >= 3">
                access_time
              </md-icon>
            </div>
            <div class="expire-time">
              {{getDaysToExpiry(food)}} Days
            </div>
          </div>
          <md-card-content layout-padding flex layout-fill>
            <h2>{{food.name}}</h2>
            <p>Expires {{getExpirationDate(food)}}</p>
            <p>Added {{getAge(food)}} days ago</p>
          </md-card-content>
          <div layout="row" layout-align="start center" class="md-actions actions-bottom"
               layout-fill>
            <md-button class="md-primary" ng-click="itemConsumed(food)">
              Eat
            </md-button>
            <md-button ng-click="itemRemoved(food)">
              Trash
            </md-button>
          </div>
        </md-card>
      </md-grid-tile>
    </md-grid-list>
    
  </md-content>
  <md-button class="md-primary md-fab md-fab-bottom-right md-accent fixed"
             ng-click="addFood()">
    <md-icon class="material-icons md-light">add</md-icon>
  </md-button>
</div>
